<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandarin Strike: Street Fighter Edition</title>
    <style>
        :root {
            --health-player: 100%;
            --health-boss: 100%;
        }
        body {
            background: #1a1a1a;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            overflow-x: hidden;
        }
        .game-container {
            width: 800px;
            background: linear-gradient(to bottom, #4a90e2 0%, #1a1a1a 100%);
            border: 4px solid #f39c12;
            margin-top: 20px;
            padding: 20px;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
        }
        .hud {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }
        .health-bar-container {
            width: 300px;
            height: 30px;
            background: #444;
            border: 2px solid #fff;
            position: relative;
        }
        .health-fill {
            height: 100%;
            transition: width 0.5s ease-in-out;
        }
        #player-health { background: #2ecc71; width: var(--health-player); }
        #boss-health { background: #e74c3c; width: var(--health-boss); float: right; }
        
        .stage {
            height: 200px;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            margin-bottom: 20px;
            font-size: 50px;
        }
        .character { transition: transform 0.2s; }
        .attack { transform: translateX(50px) scale(1.2); }
        .damage { animation: shake 0.5s; color: red; }

        .question-area {
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            min-height: 150px;
        }
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 15px;
            font-size: 16px;
            cursor: pointer;
            background: #34495e;
            color: white;
            border: none;
            border-radius: 5px;
            transition: 0.2s;
        }
        button:hover { background: #f39c12; }
        
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            40% { transform: translate(3px, 2px) rotate(-1deg); }
            100% { transform: translate(0, 0); }
        }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>MANDARIN STRIKE</h1>
    <p>Select the correct word to land a hit!</p>

    <div class="game-container">
        <div class="hud">
            <div>
                <strong>STUDENT (YOU)</strong>
                <div class="health-bar-container"><div id="player-health" class="health-fill"></div></div>
            </div>
            <div>
                <strong style="text-align: right; display: block;">MASTER XIAO (BOSS)</strong>
                <div class="health-bar-container"><div id="boss-health" class="health-fill"></div></div>
            </div>
        </div>

        <div class="stage">
            <div id="player-sprite" class="character">ðŸ¥‹</div>
            <div id="boss-sprite" class="character">ðŸ‘¹</div>
        </div>

        <div class="question-area" id="game-ui">
            <h3 id="question-text">Loading question...</h3>
            <p id="pinyin-text" style="color: #bdc3c7; font-style: italic;"></p>
            <div class="options" id="options-container"></div>
        </div>

        <div id="win-screen" class="hidden" style="text-align:center;">
            <h2>VICTORY! KO!</h2>
            <button onclick="location.reload()">Play Again</button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "æˆ‘æ¯å¤©ç”¨æ‰‹æœºä¸Šçš„ _______ å­¦ä¸­æ–‡ã€‚", p: "wÇ’ mÄ›itiÄn yÃ²ng shÇ’ujÄ« shÃ ng de... ", a: "åº”ç”¨ç¨‹åº (App)", b1: "é’±åŒ… (Wallet)", b2: "çŽ°é‡‘ (Cash)" },
            { q: "å¥¹å–œæ¬¢ç”¨ _______ è·Ÿæœ‹å‹èŠå¤©ã€‚", p: "tÄ xÇhuÄn yÃ²ng... gÄ“n pÃ©ngyou liÃ¡otiÄn.", a: "å¾®ä¿¡ (WeChat)", b1: "ä¿¡ç”¨å¡ (Credit Card)", b2: "å¤–å– (Takeout)" },
            { q: "æˆ‘ä»¬åœ¨å’–å•¡åº—é‡Œ _______ äº†ä¸€ä¸ªå°æ—¶ã€‚", p: "wÇ’men zÃ i kÄfÄ“idiÃ n lÇ... le yÃ­ gÃ¨ xiÇŽoshÃ­.", a: "èŠå¤© (Chatted)", b1: "ä¹°ç¥¨ (Buy tickets)", b2: "æ‹œå¹´ (New Year visit)" },
            { q: "åœ¨è¶…å¸‚ä¹°ä¸œè¥¿çš„æ—¶å€™å¿…é¡» _______ã€‚", p: "zÃ i chÄoshÃ¬ mÇŽi dÅngxi de shÃ­hou bÃ¬xÅ«...", a: "ä»˜é’± (Pay)", b1: "ç‚¹å¤–å– (Order takeout)", b2: "åå‡ºç§Ÿè½¦ (Taxi)" },
            { q: "å‡ºå›½æ—…è¡Œæœ€å¥½å¸¦ä¸€å¼  _______ã€‚", p: "chÅ«guÃ³ lÇšxÃ­ng zuÃ¬ hÇŽo dÃ i yÃ¬ zhÄng...", a: "ä¿¡ç”¨å¡ (Credit Card)", b1: "çº¢åŒ… (Red Envelope)", b2: "åº”ç”¨ç¨‹åº (App)" }
        ];

        let currentIdx = 0;
        let playerHP = 100;
        let bossHP = 100;

        function loadQuestion() {
            if (currentIdx >= questions.length || bossHP <= 0) {
                showWin();
                return;
            }

            const item = questions[currentIdx];
            document.getElementById('question-text').innerText = item.q;
            document.getElementById('pinyin-text').innerText = item.p;
            
            const btns = [
                { text: item.a, correct: true },
                { text: item.b1, correct: false },
                { text: item.b2, correct: false }
            ].sort(() => Math.random() - 0.5);

            const container = document.getElementById('options-container');
            container.innerHTML = '';
            btns.forEach(btn => {
                const b = document.createElement('button');
                b.innerText = btn.text;
                b.onclick = () => handleAnswer(btn.correct);
                container.appendChild(b);
            });
        }

        function handleAnswer(isCorrect) {
            const player = document.getElementById('player-sprite');
            const boss = document.getElementById('boss-sprite');

            if (isCorrect) {
                // Player Attacks
                player.classList.add('attack');
                boss.classList.add('damage');
                bossHP -= 25;
                document.documentElement.style.setProperty('--health-boss', bossHP + '%');
                setTimeout(() => {
                    player.classList.remove('attack');
                    boss.classList.remove('damage');
                }, 500);
            } else {
                // Boss Attacks
                boss.classList.add('attack');
                player.classList.add('damage');
                playerHP -= 20;
                document.documentElement.style.setProperty('--health-player', playerHP + '%');
                setTimeout(() => {
                    boss.classList.remove('attack');
                    player.classList.remove('damage');
                }, 500);
            }

            currentIdx++;
            setTimeout(loadQuestion, 600);
        }

        function showWin() {
            document.getElementById('game-ui').classList.add('hidden');
            document.getElementById('win-screen').classList.remove('hidden');
        }

        loadQuestion();
    </script>
</body>
</html>
